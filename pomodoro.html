<html>
  <head>
    <meta charset="utf-8" />
    <title>pomodoro</title>
    <style>
      body {
        background-color: rgba(0, 0, 0, 0);
        color: #fff;
        font-family: Arial, sans-serif;
        font-size: 256px;
        font-weight: bold;
        margin: 0px auto;
        overflow: hidden;
        -webkit-text-stroke: 3px #000;
      }
    </style>
  </head>
  <body>
    <div id="timer"></div>
    <script type="text/javascript">
      function zeroPadding(number, length) {
        return (Array(length).join("0") + number).slice(-length);
      }

      function calculateTimerText() {
        const date = new Date();
        const minutes = date.getMinutes();
        const seconds = date.getSeconds();
        const remainingSeconds = 59 - seconds;
        const remainingMinutes = (minutes < 50 ? 49 : 59) - minutes;
        return [
          zeroPadding(remainingMinutes, 2),
          zeroPadding(remainingSeconds, 2),
        ].join(":");
      }

      function switchScene() {
        const date = new Date();
        const minutes = date.getMinutes();
        const seconds = date.getSeconds();
        if (seconds === 0) {
          if (minutes === 0) {
            switchToWorkScene();
          } else if (minutes === 50) {
            switchToBreakScene();
          }
        }
      }

      function switchToBreakScene() {
        if (window.obsstudio) {
          window.obsstudio.setCurrentScene("Break");
        }
      }

      function switchToWorkScene() {
        if (window.obsstudio) {
          window.obsstudio.setCurrentScene("Work");
        }
      }

      setInterval(function () {
        document.getElementById("timer").textContent = calculateTimerText();
        switchScene();
      }, 1000);
    </script>
  </body>
</html>
